{"ast":null,"code":"import _toConsumableArray from \"/Users/tonyparker/Documents/github/karfur/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/Users/tonyparker/Documents/github/karfur/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/tonyparker/Documents/github/karfur/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/tonyparker/Documents/github/karfur/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/tonyparker/Documents/github/karfur/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/tonyparker/Documents/github/karfur/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/tonyparker/Documents/github/karfur/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/tonyparker/Documents/github/karfur/client/src/views/Backend/Chat/Chat.js\";\nimport React from 'react';\nimport { socket } from '../../../utils/API';\nimport users from './users';\nimport userdata from './userdata';\nimport messageHistory from './messageHistory';\nimport avatar_bg_colored from \"../../../assets/avatar_bg_colored.svg\";\nimport my_avatar from '../../../assets/avatar.png';\nimport './Chat.scss';\nexport var Chat =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Chat, _React$Component);\n\n  function Chat() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Chat);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Chat)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      attachedClasses: [\"action_menu\"],\n      messageList: messageHistory,\n      newMessagesCount: 0,\n      message: {\n        type: 'text',\n        author: 'me',\n        data: {\n          text: ''\n        }\n      }\n    };\n\n    _this.componentWillMount = function () {\n      document.body.style.background = \"#7F7FD5\";\n      document.body.style.background = \"-webkit-linear-gradient(to right, #91EAE4, #86A8E7, #7F7FD5)\";\n      document.body.style.background = \"linear-gradient(to right, #91EAE4, #86A8E7, #7F7FD5)\";\n    };\n\n    _this.componentWillUnmount = function () {\n      document.body.style.background = null;\n    };\n\n    _this._onMessageWasSent = function () {\n      _this.props.socketFn.sendMessage(_this.state.message, 'agent');\n\n      _this.setState({\n        message: _objectSpread({}, _this.state.message, {\n          data: {\n            text: ''\n          }\n        })\n      });\n    };\n\n    _this._handleClick = function () {\n      _this.setState({\n        newMessagesCount: 0\n      });\n    };\n\n    _this.handleChange = function (event) {\n      _this.setState({\n        message: _objectSpread({}, _this.state.message, {\n          data: {\n            text: event.target.value\n          }\n        })\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Chat, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      socket.on('MessageSent', function (msg) {\n        console.log('ici', msg);\n\n        _this2.setState({\n          messageList: [].concat(_toConsumableArray(_this2.state.messageList), [msg])\n        });\n      });\n    }\n  }, {\n    key: \"_onFilesSelected\",\n    value: function _onFilesSelected(fileList) {\n      var objectURL = window.URL.createObjectURL(fileList[0]);\n      this.setState({\n        messageList: [].concat(_toConsumableArray(this.state.messageList), [{\n          type: 'file',\n          author: \"me\",\n          data: {\n            url: objectURL,\n            fileName: fileList[0].name\n          }\n        }])\n      });\n    }\n  }, {\n    key: \"_sendMessage\",\n    value: function _sendMessage(text) {\n      if (text.length > 0) {\n        var newMessagesCount = this.state.isOpen ? this.state.newMessagesCount : this.state.newMessagesCount + 1;\n        this.setState({\n          newMessagesCount: newMessagesCount,\n          messageList: [].concat(_toConsumableArray(this.state.messageList), [{\n            author: 'them',\n            type: 'text',\n            data: {\n              text: text\n            }\n          }])\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      this.toggleMenu = function () {\n        if (_this3.state.attachedClasses.length === 1) {\n          _this3.setState({\n            attachedClasses: [\"action_menu\", \"display\"]\n          });\n        } else {\n          _this3.setState({\n            attachedClasses: [\"action_menu\"]\n          });\n        }\n      };\n\n      return React.createElement(\"div\", {\n        className: \"chatContainer container-fluid h-100\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row justify-content-center h-100\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-4 col-xl-3 chat\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card mb-sm-3 mb-md-0 contacts_card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"input-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Rechercher...\",\n        name: \"\",\n        className: \"form-control search\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"input-group-prepend\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"input-group-text search_btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-search\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }))))), React.createElement(\"div\", {\n        className: \"card-body contacts_body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"contacts\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, users.map(function (user, idx) {\n        return React.createElement(\"li\", {\n          key: user.userId,\n          className: idx === 0 ? \"active\" : undefined,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"d-flex bd-highlight\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"img_cont\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: avatar_bg_colored,\n          className: \"rounded-circle user_img\",\n          alt: \"avatar\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123\n          },\n          __self: this\n        }), React.createElement(\"span\", {\n          className: user.satus === \"en ligne\" ? \"online_icon\" : \"offline_icon offline\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"user_info\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        }, user.username), React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131\n          },\n          __self: this\n        }, user.username, \" est \", user.status))));\n      }))), React.createElement(\"div\", {\n        className: \"card-footer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"col-md-8 col-xl-6 chat\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card-header msg_head\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"d-flex bd-highlight\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"img_cont\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: avatar_bg_colored,\n        className: \"rounded-circle user_img\",\n        alt: \"avatar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        className: \"online_icon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"user_info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, \"Discuter avec \", userdata.username), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, \"1767 Messages\"))), React.createElement(\"span\", {\n        id: \"action_menu_btn\",\n        onClick: this.toggleMenu,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-ellipsis-v\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: this.state.attachedClasses.join(' '),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-user-circle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }), \" Voir le profil\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-users\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }), \" Ajouter aux favoris\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-plus\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }), \" Ajouter \\xE0 un groupe\"), React.createElement(\"li\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-ban\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }), \" Bloquer\")))), React.createElement(\"div\", {\n        className: \"card-body msg_card_body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, this.state.messageList.map(function (message, idx) {\n        return React.createElement(\"div\", {\n          key: idx,\n          className: message.author === \"me\" ? \"d-flex justify-content-end mb-4\" : \"d-flex justify-content-start mb-4\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173\n          },\n          __self: this\n        }, message.author !== \"me\" && React.createElement(\"div\", {\n          className: \"img_cont_msg\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: avatar_bg_colored,\n          className: \"rounded-circle user_img_msg\",\n          alt: \"avatar\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: message.author === \"me\" ? \"msg_cotainer_send\" : \"msg_cotainer\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184\n          },\n          __self: this\n        }, message.data.text, React.createElement(\"span\", {\n          className: message.author === \"me\" ? \"msg_time_send\" : \"msg_time\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 188\n          },\n          __self: this\n        }, \"8:40 AM, Today\")), message.author === \"me\" && React.createElement(\"div\", {\n          className: \"img_cont_msg\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: my_avatar,\n          className: \"rounded-circle user_img_msg\",\n          alt: \"mon avatar\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194\n          },\n          __self: this\n        })));\n      })), React.createElement(\"div\", {\n        className: \"card-footer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"input-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"input-group-append\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"input-group-text attach_btn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-paperclip\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }))), React.createElement(\"textarea\", {\n        name: \"\",\n        className: \"form-control type_msg\",\n        placeholder: \"Ecrivez votre message...\",\n        value: this.state.message.data.text,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"input-group-append\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"input-group-text send_btn\",\n        onClick: this._onMessageWasSent,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-location-arrow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      })))))))));\n    }\n  }]);\n\n  return Chat;\n}(React.Component);\n;\nexport default Chat;","map":{"version":3,"sources":["/Users/tonyparker/Documents/github/karfur/client/src/views/Backend/Chat/Chat.js"],"names":["React","socket","users","userdata","messageHistory","my_avatar","Chat","state","attachedClasses","messageList","newMessagesCount","message","type","author","data","text","componentWillMount","document","body","style","background","componentWillUnmount","_onMessageWasSent","props","socketFn","sendMessage","setState","_handleClick","handleChange","event","target","value","on","msg","console","log","fileList","objectURL","window","URL","createObjectURL","url","fileName","name","length","isOpen","toggleMenu","map","user","idx","userId","undefined","avatar_bg_colored","satus","username","status","join","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { socket } from '../../../utils/API';\n\nimport users from './users';\nimport userdata from './userdata';\nimport messageHistory from './messageHistory';\n\nimport avatar_bg_colored from '../../../assets/avatar_bg_colored.svg'\nimport my_avatar from '../../../assets/avatar.png'\n\nimport './Chat.scss';\n\nexport class Chat extends React.Component {\n  state={\n    attachedClasses: [\"action_menu\"],\n    messageList: messageHistory,\n    newMessagesCount: 0,\n    message:{\n      type: 'text', \n      author: 'me', \n      data: { text: ''} \n    }\n  }\n  componentWillMount = () => {\n    document.body.style.background = \"#7F7FD5\";\n    document.body.style.background = \"-webkit-linear-gradient(to right, #91EAE4, #86A8E7, #7F7FD5)\";\n    document.body.style.background = \"linear-gradient(to right, #91EAE4, #86A8E7, #7F7FD5)\";\n  }\n\n  componentWillUnmount = () => {\n    document.body.style.background = null;\n  }\n\n  componentDidMount() {    \n    socket.on('MessageSent', msg => {\n      console.log('ici',msg);\n      this.setState({\n        messageList: [...this.state.messageList, msg]\n      });\n    });\n  }\n\n  _onMessageWasSent = () => {\n    this.props.socketFn.sendMessage(this.state.message, 'agent');\n    this.setState({\n      message: {\n        ...this.state.message,\n        data: { text: ''}\n      }\n    });\n  }\n\n  _onFilesSelected(fileList) {\n    const objectURL = window.URL.createObjectURL(fileList[0]);\n    this.setState({\n      messageList: [...this.state.messageList, {\n        type: 'file', author: \"me\",\n        data: {\n          url: objectURL,\n          fileName: fileList[0].name\n        }\n      }]\n    })\n  }\n\n  _sendMessage(text) {\n    if (text.length > 0) {\n      const newMessagesCount = this.state.isOpen ? this.state.newMessagesCount : this.state.newMessagesCount + 1\n      this.setState({\n        newMessagesCount: newMessagesCount,\n        messageList: [...this.state.messageList, {\n          author: 'them',\n          type: 'text',\n          data: { text }\n        }]\n      })\n    }\n  }\n\n  _handleClick=() => {\n    this.setState({\n      newMessagesCount: 0\n    })\n  }\n\n  handleChange = event => {\n    this.setState({\n      message: {\n        ...this.state.message,\n        data: { text: event.target.value}\n      }\n    });\n  }\n\n  render() {\n      this.toggleMenu = () => {\n        if(this.state.attachedClasses.length===1){\n          this.setState({attachedClasses : [\"action_menu\",\"display\"]});\n        }else{\n          this.setState({attachedClasses : [\"action_menu\"]});\n        }\n      }\n      return(\n        <div className=\"chatContainer container-fluid h-100\">\n          <div className=\"row justify-content-center h-100\">\n            <div className=\"col-md-4 col-xl-3 chat\">\n              <div className=\"card mb-sm-3 mb-md-0 contacts_card\">\n                <div className=\"card-header\">\n                  <div className=\"input-group\">\n                    <input type=\"text\" placeholder=\"Rechercher...\" name=\"\" className=\"form-control search\" />\n                    <div className=\"input-group-prepend\">\n                      <span className=\"input-group-text search_btn\"><i className=\"fa fa-search\"></i></span>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"card-body contacts_body\">\n                  <div className=\"contacts\">\n                    {users.map((user, idx) => {\n                      return (\n                        <li key={user.userId} className={idx===0 ? \"active\" : undefined}>\n                          <div className=\"d-flex bd-highlight\">\n                            <div className=\"img_cont\">\n                              <img \n                                src={avatar_bg_colored} \n                                className=\"rounded-circle user_img\"\n                                alt=\"avatar\" />\n                              <span className={user.satus===\"en ligne\" ? \"online_icon\" : \"offline_icon offline\"}></span>\n                            </div>\n                            <div className=\"user_info\">\n                              <span>{user.username}</span>\n                              <p>{user.username} est {user.status}</p>\n                            </div>\n                          </div>\n                        </li>\n                      )\n                    })}\n                  </div>\n                </div>\n                <div className=\"card-footer\"></div>\n                </div>\n              </div>\n              <div className=\"col-md-8 col-xl-6 chat\">\n                <div className=\"card\">\n                  <div className=\"card-header msg_head\">\n                    <div className=\"d-flex bd-highlight\">\n                      <div className=\"img_cont\">\n                        <img \n                          src={avatar_bg_colored} \n                          className=\"rounded-circle user_img\"\n                          alt=\"avatar\" />\n                        <span className=\"online_icon\"></span>\n                      </div>\n                      <div className=\"user_info\">\n                        <span>Discuter avec {userdata.username}</span>\n                        <p>1767 Messages</p>\n                      </div>\n                    </div>\n                    <span id=\"action_menu_btn\" onClick={this.toggleMenu}>\n                      <i className=\"fa fa-ellipsis-v\"></i>\n                    </span>\n                    <div className={this.state.attachedClasses.join(' ')}>\n                      <ul>\n                        <li><i className=\"fa fa-user-circle\"></i> Voir le profil</li>\n                        <li><i className=\"fa fa-users\"></i> Ajouter aux favoris</li>\n                        <li><i className=\"fa fa-plus\"></i> Ajouter Ã  un groupe</li>\n                        <li><i className=\"fa fa-ban\"></i> Bloquer</li>\n                      </ul>\n                    </div>\n                  </div>\n                  <div className=\"card-body msg_card_body\">\n                    {this.state.messageList.map((message, idx) => {\n                      return (\n                        <div key={idx} className={message.author===\"me\"?\n                              \"d-flex justify-content-end mb-4\" :\n                              \"d-flex justify-content-start mb-4\"}>\n                          {message.author!==\"me\" && (\n                            <div className=\"img_cont_msg\">\n                              <img \n                                src={avatar_bg_colored} \n                                className=\"rounded-circle user_img_msg\"\n                                alt=\"avatar\" />\n                            </div>\n                          )}\n                          <div className={message.author===\"me\"?\n                              \"msg_cotainer_send\" :\n                              \"msg_cotainer\"}>\n                            {message.data.text}\n                            <span className={message.author===\"me\"?\n                              \"msg_time_send\" :\n                              \"msg_time\"}>8:40 AM, Today</span>\n                          </div>\n                          {message.author===\"me\" && (\n                            <div className=\"img_cont_msg\">\n                              <img \n                                src={my_avatar} \n                                className=\"rounded-circle user_img_msg\"\n                                alt=\"mon avatar\" />\n                            </div>\n                          )}\n                        </div>\n                      )\n                    })}\n                  </div>\n                  <div className=\"card-footer\">\n                    <div className=\"input-group\">\n                      <div className=\"input-group-append\">\n                        <span className=\"input-group-text attach_btn\"><i className=\"fa fa-paperclip\"></i></span>\n                      </div>\n                      <textarea name=\"\" \n                        className=\"form-control type_msg\" \n                        placeholder=\"Ecrivez votre message...\"\n                        value={this.state.message.data.text} \n                        onChange={this.handleChange}>\n                      </textarea>\n                      <div className=\"input-group-append\">\n                        <span className=\"input-group-text send_btn\" onClick={this._onMessageWasSent}>\n                          <i className=\"fa fa-location-arrow\"></i>\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n            </div>\n          </div>\n        </div>\n      )\n  }\n};\n\nexport default Chat;"]},"metadata":{},"sourceType":"module"}